<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Community Dashboard</title>
  </head>
  <body>
    <div id="chart"></div>

    <script src="libs/d3.org/3.5.14/d3.min.js" charset="utf-8"></script>
    <script>
        function getHistoricalNoShowAveragePercentages() {
          var historicalNoShowAveragePercentagesJson = { results: { historicalNoShowRate: '0.78' } };
          return historicalNoShowAveragePercentagesJson;
        }

        function transformAveragePercetagesToD3AcceptableFormat(historicalNoShowAveragePercentagesJson) {
          var transformedDataArray = [];
          transformedDataArray[0] = {
              label: 'No Show Rate',
              rate: 100 * historicalNoShowAveragePercentagesJson.results.historicalNoShowRate
          }

          transformedDataArray[1] = {
              label: 'Show Rate',
              rate: 100 - (100 * historicalNoShowAveragePercentagesJson.results.historicalNoShowRate)
          }

          return transformedDataArray;
        }

        (function(d3) {
          'use strict';

          var dataset = transformAveragePercetagesToD3AcceptableFormat(getHistoricalNoShowAveragePercentages());

          var width = 360;
          var height = 360;
          var radius = Math.min(width, height) / 2;
          var donutWidth = 75;                            // NEW

          var color = d3.scale.category20b();

          var svg = d3.select('#chart')
            .append('svg')
            .attr('width', width)
            .attr('height', height)
            .append('g')
            .attr('transform', 'translate(' + (width / 2) +
              ',' + (height / 2) + ')');

          var arc = d3.svg.arc()
            .innerRadius(radius - donutWidth)             // NEW
            .outerRadius(radius);

          var pie = d3.layout.pie()
            .value(function(d) { return d.rate; })
            .sort(null);

          var path = svg.selectAll('path')
            .data(pie(dataset))
            .enter()
            .append('path')
            .attr('d', arc)
            .attr('fill', function(d, i) {
              return color(d.data.label);
            });

        })(window.d3);
      </script>

  </body>
</html>
